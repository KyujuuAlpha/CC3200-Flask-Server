window.optimizeAnimationLoop=function(b){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(b){window.setTimeout(b,1E3/60)}}();function clear(b){b.save();b.setTransform(1,0,0,1,0,0);b.clearRect(0,0,b.canvas.width,b.canvas.height);b.restore()}
function CanvasBlock(b,d,c,f,e){if(isNaN(f[0])||isNaN(f[1]))alert("Error, please use numbers for coordinates.");else{this.opacity=1;this.id=b;this.x=f[0];this.y=f[1];this.type=d;if("rect"==d){if(isNaN(c[0])||isNaN(c[1])){alert("Error, please use numbers for size.");return}this.width=c[0];this.height=c[1]}else if("circ"==d){if(isNaN(c[0])){alert("Error, please use numbers for radius.");return}this.radius=c[0];this.width=2*c[0];this.height=2*c[0]}else if("poly"==d){this.points=c;b=[];d=[];for(c=0;c<
this.points.length;c++){if(isNaN(this.points[c][0])||isNaN(this.points[c][1])){alert("Error, please use numbers for polygon points.");return}b.push(this.points[c][0]);d.push(this.points[c][1])}this.width=Math.ceil(Math.max.apply(Math,b)-Math.min.apply(Math,b));this.height=Math.ceil(Math.max.apply(Math,d)-Math.min.apply(Math,d))}else if("text"==d){if(!isNaN(c[0])||isNaN(c[1])){alert("Error, please make sure text is a string and size is a number.");return}this.face="Arial";this.text=c[0];this.width=
this.size=c[1];this.height=c[1]*c[0].length}else{alert("Error, please use valid shape.");return}if(e instanceof HTMLImageElement)this.background=e,this.img=!0,this.background.sheet&&(this.sheet=this.background.sheet,this.indexX=this.background.indexX,this.indexY=this.background.indexY,this.spriteW=this.background.spriteW,this.spriteH=this.background.spriteH);else if(-1<e.indexOf("#")&&7==e.length)this.background=e,this.img=!1;else if("linear"==e[0]||"radial"==e[0])this.background=e,this.img=!1;else{alert("Error, please use an image object, gradient, or a hex color code.");
return}this.stroke=function(a,b){-1==String(a).indexOf("#")&&7!=String(a).length?alert("Error, please use hex code for color codes when using stroke."):isNaN(b)?alert("Error, please use a numerical integer as the stroke width."):(this.stroked=!0,this.strokeWidth=b,this.strokeColor=a)};this.rotate=function(a,b,c){b&&c||(b=this.x+this.width/2,c=this.y+this.height/2);isNaN(a)||isNaN(b)||isNaN(c)?alert("Error, when rotating a canvas block, make sure all perimeters are numerical integers."):this.rotateVars=
[a,b,c]};this.draw=function(a){try{a.save();if("rect"==this.type)a.beginPath(),this.rotateVars&&(a.translate(this.rotateVars[1],this.rotateVars[2]),a.rotate(Math.PI/180*this.rotateVars[0]),a.translate(-this.rotateVars[1],-this.rotateVars[2])),a.rect(this.x,this.y,this.width,this.height),a.closePath();else if("circ"==this.type)this.width=2*this.radius,this.height=2*this.radius,a.beginPath(),this.rotateVars&&(a.translate(this.rotateVars[1],this.rotateVars[2]),a.rotate(Math.PI/180*this.rotateVars[0]),
a.translate(-this.rotateVars[1],-this.rotateVars[2])),a.arc(this.x+this.radius,this.y+this.radius,this.radius,0,2*Math.PI),a.closePath();else if("poly"==this.type){for(var b=[],c=[],d=0;d<this.points.length;d++)b.push(this.points[d][0]),c.push(this.points[d][1]);this.width=Math.ceil(Math.max.apply(Math,b)-Math.min.apply(Math,b));this.height=Math.ceil(Math.max.apply(Math,c)-Math.min.apply(Math,c));a.beginPath();this.rotateVars&&(a.translate(this.rotateVars[1],this.rotateVars[2]),a.rotate(Math.PI/180*
this.rotateVars[0]),a.translate(-this.rotateVars[1],-this.rotateVars[2]));a.moveTo(this.x+this.points[0][0],this.y+this.points[0][1]);for(b=1;b<this.points.length;b++)a.lineTo(this.x+this.points[b][0],this.y+this.points[b][1]);a.closePath()}else"text"==this.type&&(a.beginPath(),this.rotateVars&&(a.translate(this.rotateVars[1],this.rotateVars[2]),a.rotate(Math.PI/180*this.rotateVars[0]),a.translate(-this.rotateVars[1],-this.rotateVars[2])),this.width=this.size,this.height=this.width*this.text.length,
a.font=this.width+"px "+this.face,a.closePath());if(this.img)"text"==this.type?(a.fillStyle="#000000",a.globalAlpha=parseFloat(this.opacity),a.fillText(this.text,this.x,this.y+this.width),this.stroked&&(a.lineWidth=this.strokeWidth,a.strokeStyle=this.strokeColor,a.strokeText(this.text,this.x,this.y+this.width))):(a.clip(),a.globalAlpha=parseFloat(this.opacity),this.sheet?a.drawImage(this.background,this.spriteW*this.indexX,this.spriteH*this.indexY,this.spriteW,this.spriteH,this.x,this.y,this.width,
this.height):a.drawImage(this.background,this.x,this.y,this.width,this.height),this.stroked&&(a.lineWidth=this.strokeWidth,a.strokeStyle=this.strokeColor,a.stroke()));else{if("linear"==this.background[0])try{var e=a.createLinearGradient(this.background[3][0],this.background[3][1],this.background[4][0],this.background[4][1]);e.addColorStop(0,this.background[1]);e.addColorStop(1,this.background[2]);a.fillStyle=e}catch(f){alert(f),a.fillStyle="black"}else if("radial"==this.background[0])try{var g=a.createRadialGradient(this.background[3][0],
this.background[3][1],this.background[3][2],this.background[4][0],this.background[4][1],this.background[4][2]);g.addColorStop(0,this.background[1]);g.addColorStop(1,this.background[2]);a.fillStyle=g}catch(h){alert(h),a.fillStyle="black"}else a.fillStyle=this.background;"text"==this.type?(a.globalAlpha=parseFloat(this.opacity),a.fillText(this.text,this.x,this.y+this.width),this.stroked&&(a.lineWidth=this.strokeWidth,a.strokeStyle=this.strokeColor,a.strokeText(this.text,this.x,this.y+this.width))):
(a.globalAlpha=parseFloat(this.opacity),a.fill(),this.stroked&&(a.lineWidth=this.strokeWidth,a.strokeStyle=this.strokeColor,a.stroke()))}a.restore()}catch(k){alert(k)}}}}
function imageLoader(){this.whenReady=function(){};this.imageList=[];this.imageReady=[];this.getImage=function(b){try{return this.imageList[b]}catch(d){return alert(d),!1}};this.addImage=function(b){try{return this.imageList.push(new Image),this.imageList[this.imageList.length-1].ready="false",this.imageList[this.imageList.length-1].onload=function(){this.ready="true"},this.imageList[this.imageList.length-1].src=b,this.imageReady.push("false"),this.imageList[this.imageList.length-1]}catch(d){alert(d)}};
this.addImages=function(){for(var b=0;b<arguments.length;b++)this.addImage(arguments[b])};this.addSpriteSheet=function(b,d,c){!isNaN(b)||isNaN(d)||isNaN(c)?alert("Error, make sure the sprite sheet is a string value and the size of the sprite are numerical values."):(b=this.addImage(b),b.sheet=!0,b.indexX=0,b.indexY=0,b.spriteW=d,b.spriteH=c)};this.loadImages=function(){var b=this,d=setInterval(function(){for(var c=0;c<b.imageList.length;c++)b.imageReady[c]=b.imageList[c].ready;if(0>b.imageReady.indexOf("false"))try{b.whenReady(),
clearInterval(d)}catch(f){alert(f),clearInterval(d)}},10)}};